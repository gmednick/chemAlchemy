column_plot <- crop_yield_tidy %>%
filter(country == country_random6) %>%
mutate(crop = fct_reorder(crop, yield_hectare)) %>%
ggplot(aes(yield_hectare, crop, fill = crop)) +
geom_col()  +
facet_wrap(~country, scales = '') +
theme(legend.position =  'none') +
labs(
title = 'Crop Yield',
y = 'Crop',
x = 'yield per hectare'
)
column_plot
# Plot crop yield per hectare.
column_plot <- crop_yield_tidy %>%
filter(country == country_random6) %>%
mutate(crop = fct_reorder(crop, yield_hectare)) %>%
ggplot(aes(yield_hectare, crop, fill = crop)) +
geom_col()  +
facet_wrap(~country, scales = '') +
theme(legend.position =  'none') +
scale_y_reordered() +
labs(
title = 'Crop Yield',
y = 'Crop',
x = 'yield per hectare'
)
column_plot
# Plot crop yield per hectare.
column_plot <- crop_yield_tidy %>%
filter(country == country_random6) %>%
mutate(crop = fct_reorder(crop, yield_hectare)) %>%
ggplot(aes(yield_hectare, crop, fill = crop)) +
geom_col()  +
facet_wrap(~country, scales = '') +
theme(legend.position =  'none') +
scale_x_reordered() +
labs(
title = 'Crop Yield',
y = 'Crop',
x = 'yield per hectare'
)
column_plot
# Plot crop yield per hectare.
column_plot <- crop_yield_tidy %>%
filter(country == country_random6) %>%
mutate(crop = fct_reorder(crop, yield_hectare)) %>%
ggplot(aes(yield_hectare, crop, fill = crop)) +
geom_col()  +
facet_wrap(~country, scales = '') +
theme(legend.position =  'none') +
scale_y_reordered() +
labs(
title = 'Crop Yield',
y = 'Crop',
x = 'yield per hectare'
)
column_plot
# Plot crop yield per hectare.
column_plot <- crop_yield_tidy %>%
filter(country == country_random6) %>%
mutate(crop = reorder_within(crop, yield_hectare)) %>%
ggplot(aes(yield_hectare, crop, fill = crop)) +
geom_col()  +
facet_wrap(~country, scales = '') +
theme(legend.position =  'none') +
scale_y_reordered() +
labs(
title = 'Crop Yield',
y = 'Crop',
x = 'yield per hectare'
)
column_plot
# Plot crop yield per hectare.
column_plot <- crop_yield_tidy %>%
filter(country == country_random6) %>%
mutate(crop = reorder_within(crop, yield_hectare)) %>%
ggplot(aes(yield_hectare, crop, fill = crop)) +
geom_col()  +
facet_wrap(~country, scales = '') +
theme(legend.position =  'none') +
scale_y_reordered() +
labs(
title = 'Crop Yield',
y = 'Crop',
x = 'yield per hectare'
)
# Plot crop yield per hectare per year.
line_plot <- crop_yield_tidy %>%
filter(country == country_random6) %>%
mutate(crop = fct_reorder(crop, yield_hectare)) %>%
ggplot(aes(year, yield_hectare, color = crop)) +
geom_line() +
facet_wrap(~country, scales = 'free_y') +
labs(
y = 'yield per hectare',
title = 'Crop Yield'
)
line_plot
# Plot crop yield per hectare.
column_plot <- crop_yield_tidy %>%
filter(country == country_random6) %>%
mutate(crop = reorder_within(crop, yield_hectare)) %>%
ggplot(aes(yield_hectare, crop, fill = crop)) +
geom_col()  +
facet_wrap(~country, scales = '') +
theme(legend.position =  'none') +
scale_y_reordered() +
labs(
title = 'Crop Yield',
y = 'Crop',
x = 'yield per hectare'
)
# Plot crop yield per hectare.
column_plot <- crop_yield_tidy %>%
filter(country == country_random6) %>%
mutate(crop = reorder_within(crop, yield_hectare, country)) %>%
ggplot(aes(yield_hectare, crop, fill = crop)) +
geom_col()  +
facet_wrap(~country, scales = '') +
theme(legend.position =  'none') +
scale_y_reordered() +
labs(
title = 'Crop Yield',
y = 'Crop',
x = 'yield per hectare'
)
# Plot crop yield per hectare.
library(tidytext)
column_plot <- crop_yield_tidy %>%
filter(country == country_random6) %>%
mutate(crop = reorder_within(crop, yield_hectare, country)) %>%
ggplot(aes(yield_hectare, crop, fill = crop)) +
geom_col()  +
facet_wrap(~country, scales = '') +
theme(legend.position =  'none') +
scale_y_reordered() +
labs(
title = 'Crop Yield',
y = 'Crop',
x = 'yield per hectare'
)
column_plot <- crop_yield_tidy %>%
filter(country == country_random6) %>%
mutate(crop = reorder_within(crop, yield_hectare, country)) %>%
ggplot(aes(yield_hectare, crop, fill = crop)) +
geom_col()  +
facet_wrap(~country, scales = 'free_y') +
theme(legend.position =  'none') +
scale_y_reordered() +
labs(
title = 'Crop Yield',
y = 'Crop',
x = 'yield per hectare'
)
column_plot
column_plot <- crop_yield_tidy %>%
filter(country == country_random6) %>%
mutate(crop = reorder_within(crop, yield_hectare, country)) %>%
ggplot(aes(yield_hectare, crop, fill = crop)) +
geom_col()  +
facet_wrap(~country, scales = 'free_x') +
theme(legend.position =  'none') +
scale_y_reordered() +
labs(
title = 'Crop Yield',
y = 'Crop',
x = 'yield per hectare'
)
column_plot
column_plot <- crop_yield_tidy %>%
filter(country == country_random6) %>%
mutate(crop = reorder_within(crop, yield_hectare, country)) %>%
ggplot(aes(yield_hectare, crop, fill = crop)) +
geom_col()  +
facet_wrap(~country, scales = 'free_y') +
theme(legend.position =  'none') +
scale_y_reordered() +
labs(
title = 'Crop Yield',
y = 'Crop',
x = 'yield per hectare'
)
column_plot
column_plot <- crop_yield_tidy %>%
filter(country == country_random6) %>%
mutate(crop = reorder_within(crop, yield_hectare, country)) %>%
ggplot(aes(yield_hectare, crop, fill = crop)) +
geom_col()  +
facet_wrap(~country, scales = 'free_y') +
theme(legend.position =  'none') +
labs(
title = 'Crop Yield',
y = 'Crop',
x = 'yield per hectare'
)
column_plot
scale_y_reordered() +
column_plot <- crop_yield_tidy %>%
filter(country == country_random6) %>%
mutate(crop = reorder_within(crop, yield_hectare, country)) %>%
ggplot(aes(yield_hectare, crop, fill = crop)) +
geom_col()  +
facet_wrap(~country, scales = 'free_y') +
theme(legend.position =  'none') +
scale_y_reordered() +
labs(
title = 'Crop Yield',
y = 'Crop',
x = 'yield per hectare'
)
column_plot <- crop_yield_tidy %>%
filter(country == country_random6) %>%
mutate(crop = reorder_within(crop, yield_hectare, country)) %>%
ggplot(aes(yield_hectare, crop, fill = crop)) +
geom_col()  +
facet_wrap(~country, scales = 'free_y') +
theme(legend.position =  'none') +
scale_y_reordered() +
labs(
title = 'Crop Yield',
y = 'Crop',
x = 'yield per hectare'
)
column_plot
# Plot crop yield per hectare per year.
line_plot <- crop_yield_tidy %>%
filter(country == country_random6) %>%
mutate(crop = fct_reorder(crop, yield_hectare)) %>%
ggplot(aes(year, yield_hectare, color = crop)) +
geom_line() +
facet_wrap(~country, scales = 'free_y') +
labs(
y = 'yield per hectare',
title = 'Crop Yield'
)
line_plot
# Plot crop yield per hectare per year.
box_plot <- crop_yield_tidy %>%
filter(country == country_random6) %>%
mutate(crop = fct_reorder(crop, yield_hectare)) %>%
ggplot(aes(yield_hectare, crop, color = crop)) +
geom_boxplot() +
theme(legend.position =  'none') +
facet_wrap(~country, scales = 'free') +
scale_y_free() +
labs(
x = 'Yield',
title = 'Crop Yield',
y = ''
)
library(ggmap)
blogdown::stop_server()
blogdown::serve_site()
# Plot crop yield per hectare per year.
line_plot <- crop_yield_tidy %>%
filter(country == country_random6) %>%
mutate(crop = fct_reorder(crop, yield_hectare)) %>%
ggplot(aes(year, yield_hectare, color = crop)) +
geom_line() +
facet_wrap(~country, scales = 'free_y') +
labs(
y = 'yield per hectare',
title = 'Crop Yield'
)
line_plot
# Plot crop yield per hectare per year.
box_plot <- crop_yield_tidy %>%
filter(country == country_random6) %>%
mutate(crop = fct_reorder(crop, yield_hectare)) %>%
ggplot(aes(yield_hectare, crop, color = crop)) +
geom_boxplot() +
theme(legend.position =  'none') +
facet_wrap(~country, scales = 'free') +
scale_y_free() +
labs(
x = 'Yield',
title = 'Crop Yield',
y = ''
)
# Plot crop yield per hectare per year.
box_plot <- crop_yield_tidy %>%
filter(country == country_random6) %>%
mutate(crop = fct_reorder(crop, yield_hectare)) %>%
ggplot(aes(yield_hectare, crop, color = crop)) +
geom_boxplot() +
theme(legend.position =  'none') +
facet_wrap(~country, scales = 'free') +
scale_y_free() +
labs(
x = 'Yield',
title = 'Crop Yield',
y = ''
)
# Plot crop yield per hectare per year.
box_plot <- crop_yield_tidy %>%
filter(country == country_random6) %>%
mutate(crop = fct_reorder(crop, yield_hectare)) %>%
ggplot(aes(yield_hectare, crop, color = crop)) +
geom_boxplot() +
theme(legend.position =  'none') +
facet_wrap(~country, scales = 'free_y') +
scale_y_free() +
labs(
x = 'Yield',
title = 'Crop Yield',
y = ''
)
# Plot crop yield per hectare per year.
box_plot <- crop_yield_tidy %>%
filter(country == country_random6) %>%
mutate(crop = fct_reorder(crop, yield_hectare)) %>%
ggplot(aes(yield_hectare, crop, color = crop)) +
geom_boxplot() +
theme(legend.position =  'none') +
facet_wrap(~country, scales = 'free_y') +
labs(
x = 'Yield',
title = 'Crop Yield',
y = ''
)
box_plot
blogdown::serve_site()
# Randomly select 4 country codes
set.seed(1013)
country_random6 <- crop_yield_tidy %>%
select(country) %>%
distinct() %>%
slice_sample(n = 6) %>%
pull()
# Plot crop yield per hectare.
library(tidytext)
column_plot <- crop_yield_tidy %>%
filter(country == country_random6) %>%
mutate(crop = reorder_within(crop, yield_hectare, country)) %>%
ggplot(aes(yield_hectare, crop, fill = crop)) +
geom_col()  +
facet_wrap(~country, scales = 'free_y') +
theme(legend.position =  'none') +
scale_y_reordered() +
labs(
title = 'Crop Yield',
y = 'Crop',
x = 'yield per hectare'
)
column_plot
# Randomly select 4 country codes
set.seed(1013)
country_random6 <- crop_yield_tidy %>%
select(country) %>%
distinct() %>%
slice_sample(n = 6) %>%
pull()
# Plot crop yield per hectare.
library(tidytext)
column_plot <- crop_yield_tidy %>%
filter(country == country_random6) %>%
mutate(crop = reorder_within(crop, yield_hectare, country)) %>%
ggplot(aes(yield_hectare, crop, fill = crop)) +
geom_col()  +
facet_wrap(~country, scales = 'free_y') +
theme(legend.position =  'none') +
scale_y_reordered() +
labs(
title = 'Crop Yield',
y = 'Crop',
x = 'yield per hectare'
)
column_plot
# We will just use the key crop yield dataset.
kable(head(crop_yields, n = 10))
kable(head(crop_yield_tidy, n = 10))
library(knitr)
knitr::opts_chunk$set(cache = TRUE, warning = FALSE, message = FALSE,
echo = TRUE, dpi = 300, cache.lazy = FALSE,
tidy = "styler", fig.width = 8, fig.height = 5)
options(cli.width = 70, width = 70)
library(tidyverse)
library(tidymodels)
library(shiny)
library(gt)
library(scales)
theme_set(theme_light())
# There are 5 datasets available.
crop_yields <- read_csv("https://raw.githubusercontent.com/rfordatascience/tidytuesday/master/data/2020/2020-09-01/key_crop_yields.csv")
# We will just use the key crop yield dataset.
kable(head(crop_yields, n = 10))
skimr::skim(crop_yields)
# Use janitor package to clean column names and pivot_longer from tidyr to tidy the data.
crop_yield_tidy <- crop_yields %>%
janitor::clean_names() %>%
rename_all(str_remove, "_tonnes.*") %>%
rename(country = entity) %>%
pivot_longer(wheat:bananas, names_to = 'crop', values_to = 'yield_hectare') %>%
drop_na(yield_hectare)
kable(head(crop_yield_tidy, n = 10))
# Randomly select 4 country codes
set.seed(1013)
country_random6 <- crop_yield_tidy %>%
select(country) %>%
distinct() %>%
slice_sample(n = 6) %>%
pull()
# another option would be to set the code equal to a set selection of countries: E.g., countries <- c('GUM',	'IND',	'YEM',	'NAM',	'URY', 'USA')
# Plot crop yield per hectare.
library(tidytext)
column_plot <- crop_yield_tidy %>%
filter(country == country_random6) %>%
mutate(crop = reorder_within(crop, yield_hectare, country)) %>%
ggplot(aes(yield_hectare, crop, fill = crop)) +
geom_col()  +
facet_wrap(~country, scales = 'free_y') +
theme(legend.position =  'none') +
scale_y_reordered() +
labs(
title = 'Crop Yield',
y = 'Crop',
x = 'yield per hectare'
)
column_plot
# Plot crop yield per hectare per year.
line_plot <- crop_yield_tidy %>%
filter(country == country_random6) %>%
mutate(crop = fct_reorder(crop, yield_hectare)) %>%
ggplot(aes(year, yield_hectare, color = crop)) +
geom_line() +
facet_wrap(~country, scales = 'free_y') +
labs(
y = 'yield per hectare',
title = 'Crop Yield'
)
line_plot
# Plot crop yield per hectare per year.
box_plot <- crop_yield_tidy %>%
filter(country == country_random6) %>%
mutate(crop = fct_reorder(crop, yield_hectare)) %>%
ggplot(aes(yield_hectare, crop, color = crop)) +
geom_boxplot() +
theme(legend.position =  'none') +
facet_wrap(~country, scales = 'free_y') +
labs(
x = 'Yield',
title = 'Crop Yield',
y = ''
)
box_plot
country_random <- crop_yield_tidy %>%
select(country) %>%
distinct() %>%
slice_sample(n = 8) %>%
pull()
column_plot <- crop_yield_tidy %>%
filter(country == country_random) %>%
mutate(crop = reorder_within(crop, yield_hectare, country)) %>%
ggplot(aes(yield_hectare, crop, fill = crop)) +
geom_col()  +
facet_wrap(~country, scales = 'free_y') +
theme(legend.position =  'none') +
scale_y_reordered() +
labs(
title = 'Crop Yield',
y = 'Crop',
x = 'yield per hectare'
)
column_plot
country_random <- crop_yield_tidy %>%
select(country) %>%
distinct() %>%
slice_sample(n = 9) %>%
pull()
column_plot <- crop_yield_tidy %>%
filter(country == country_random) %>%
mutate(crop = reorder_within(crop, yield_hectare, country)) %>%
ggplot(aes(yield_hectare, crop, fill = crop)) +
geom_col()  +
facet_wrap(~country, scales = 'free_y') +
theme(legend.position =  'none') +
scale_y_reordered() +
labs(
title = 'Crop Yield',
y = 'Crop',
x = 'yield per hectare'
)
column_plot
# Plot crop yield per hectare per year.
box_plot <- crop_yield_tidy %>%
filter(country == country_random) %>%
mutate(crop = fct_reorder(crop, yield_hectare)) %>%
ggplot(aes(yield_hectare, crop, color = crop)) +
geom_boxplot() +
theme(legend.position =  'none') +
facet_wrap(~country, scales = 'free_x') +
labs(
x = 'Yield',
title = 'Crop Yield',
y = ''
)
box_plot
# Plot crop yield per hectare per year.
box_plot <- crop_yield_tidy %>%
filter(country == country_random) %>%
mutate(crop = fct_reorder(crop, yield_hectare)) %>%
ggplot(aes(yield_hectare, crop, color = crop)) +
geom_boxplot() +
theme(legend.position =  'none') +
facet_wrap(~country, scales = 'free') +
labs(
x = 'Yield',
title = 'Crop Yield',
y = ''
)
box_plot
