tooltip = "text"
) %>%
config(displayModeBar = FALSE)
blogdown::stop_server()
blogdown::serve_site()
ca_map <- plot_usmap(
data = us_counties, values = "cases_per_1e6", include = c("Santa Cruz"), color = "black",
size = 0.1)
plot_usmap(
data = us_counties, values = "cases_per_1e6", include = c("Santa Cruz"), color = "black",
size = 0.1)
plot_usmap(
data = us_counties, values = "cases_per_1e6", include = c("Santa Cruz"), color = "black",
size = 0.1)
plot_usmap(
data = us_counties, values = "cases_per_1e6", include = c("CA", "Santa Cruz"), color = "black",
size = 0.1)
blogdown::serve_site()
blogdown::stop_server()
blogdown::serve_site()
blogdown:::new_post_addin()
blogdown:::insert_image_addin()
blogdown::stop_server()
blogdown::serve_site()
blogdown::stop_server()
blogdown::serve_site()
blogdown::serve_site()
library(googlesheets4)
gs_auth()
?googlesheets4::gs4_auth
blogdown::serve_site()
us_monthly
us_state %>%
mutate(month = month(date),
month_name = month.name[month])
library(tidyverse)
library(lubridate)
library(shiny)
library(shinydashboard)
library(usmap)
library(ggrepel)
library(plotly)
library(viridis)
library(shinythemes)
theme_set(theme_light())
scale_colour_discrete <- scale_colour_viridis_d
us_state %>%
mutate(month = month(date),
month_name = month.name[month])
us_state %>%
mutate(month = month(date),
month_name = month.name[month],
factor(month.abb[month],levels=month.abb))
us_state %>%
mutate(month = month(date),
month_name = month.name[month],
month_name = factor(month.abb[month],levels=month.abb))
library(gganimate)
library(transformr)
us_monthly <- us_state %>%
mutate(month = month(date),
month_name = month.name[month],
month_name = factor(month.abb[month],levels=month.abb)) %>%
group_by(state, month) %>%
summarize(
cases = max(cases),
deaths = max(deaths),
population = max(population)
) %>%
filter(cases > 0) %>%
mutate(
deaths_per_1e6 = 1000000 * (deaths / population),
cases_per_1e6 = 1000000 * (cases / population)
) %>%
filter(!is.na(deaths_per_1e6))
p <- plot_usmap(
data = us_monthly,
values = "cases_per_1e6",
color = "black") +
theme(panel.background = element_rect(color = "black", fill = "grey80")) +
theme(legend.position = "right", plot.title = element_text(face = "bold", size = 18, color = "#367588")) +
labs(title = paste0("Cases by County")) +
scale_fill_viridis_c(
name = "Cases by Month",
alpha = 0.5
)
p <- p + transition_states(MonthName, transition_length = 3, state_length = 1) +
labs(title = 'Month is {closest_state}')
p
p <- p + transition_states(month_name, transition_length = 3, state_length = 1) +
labs(title = 'Month is {closest_state}')
p
us_monthly
us_monthly <- us_state %>%
mutate(month = month(date),
month_name = month.name[month],
month_name = factor(month.abb[month],levels=month.abb)) %>%
group_by(state, month) %>%
summarize(
cases = max(cases),
deaths = max(deaths),
population = max(population)
) %>%
filter(cases > 0) %>%
mutate(
deaths_per_1e6 = 1000000 * (deaths / population),
cases_per_1e6 = 1000000 * (cases / population)
) %>%
filter(!is.na(deaths_per_1e6))
us_monthly
us_monthly <- us_state %>%
mutate(month = month(date),
month_name = month.name[month],
month_name = factor(month.abb[month],levels=month.abb)) %>%
group_by(state, month, month_name) %>%
summarize(
cases = max(cases),
deaths = max(deaths),
population = max(population)
) %>%
filter(cases > 0) %>%
mutate(
deaths_per_1e6 = 1000000 * (deaths / population),
cases_per_1e6 = 1000000 * (cases / population)
) %>%
filter(!is.na(deaths_per_1e6))
us_monthly
p <- p + transition_states(month_name, transition_length = 3, state_length = 1) +
labs(title = 'Month is {closest_state}')
p
p <- p +
geom_dl(aes(label = month_name), method = list(dl.trans(x = x + 0.1, y = y + 0.25), "last.points", fontface = "bold")) +
transition_states(month_name, transition_length = 3, state_length = 1) +
labs(title = 'Month is {closest_state}')
install.packages("directlabels")
library(directlabels)
p <- p +
geom_dl(aes(label = month_name), method = list(dl.trans(x = x + 0.1, y = y + 0.25), "last.points", fontface = "bold")) +
transition_states(month_name, transition_length = 3, state_length = 1) +
labs(title = 'Month is {closest_state}')
p
data = us_monthly,
data = us_monthly,
us_monthly <- us_state %>%
mutate(month = month(date),
month_name = month.name[month],
month_name = factor(month.abb[month],levels=month.abb)) %>%
group_by(state, month, month_name) %>%
summarize(
cases = max(cases),
deaths = max(deaths),
population = max(population)
) %>%
filter(cases > 0) %>%
mutate(
deaths_per_1e6 = 1000000 * (deaths / population),
cases_per_1e6 = 1000000 * (cases / population)
) %>%
filter(!is.na(deaths_per_1e6))
p <- plot_usmap(
data = us_monthly,
values = "cases_per_1e6",
color = "black") +
theme(panel.background = element_rect(color = "black", fill = "grey80")) +
theme(legend.position = "right", plot.title = element_text(face = "bold", size = 18, color = "#367588")) +
labs(title = paste0("Cases by County")) +
scale_fill_viridis_c(
name = "Cases by Month",
alpha = 0.5
)
p
p <- p +
geom_dl(us_monthly, aes(label = month_name), method = list(dl.trans(x = x + 0.1, y = y + 0.25), "last.points", fontface = "bold")) +
transition_states(month_name, transition_length = 3, state_length = 1) +
labs(title = 'Month is {closest_state}')
p <- p +
geom_dl(aes(label = month_name), method = list(dl.trans(x = x + 0.1, y = y + 0.25), "last.points", fontface = "bold")) +
transition_states(month_name, transition_length = 3, state_length = 1) +
labs(title = 'Month is {closest_state}')
p
p <- p +
transition_states(month_name, transition_length = 3, state_length = 1) +
labs(title = 'Month is {closest_state}')
p
data = us_monthly,
us_monthly <- us_state %>%
mutate(month = month(date),
month_name = month.name[month],
month_name = factor(month.abb[month],levels=month.abb)) %>%
group_by(state, month, month_name) %>%
summarize(
cases = max(cases),
deaths = max(deaths),
population = max(population)
) %>%
filter(cases > 0) %>%
mutate(
deaths_per_1e6 = 1000000 * (deaths / population),
cases_per_1e6 = 1000000 * (cases / population)
) %>%
filter(!is.na(deaths_per_1e6))
p <- plot_usmap(
data = us_monthly,
values = "cases_per_1e6",
color = "black") +
theme(panel.background = element_rect(color = "black", fill = "grey80")) +
theme(legend.position = "right", plot.title = element_text(face = "bold", size = 18, color = "#367588")) +
labs(title = paste0("Cases by County")) +
scale_fill_viridis_c(
name = "Cases by Month",
alpha = 0.5
)
p <- p +
transition_states(month_name, transition_length = 3, state_length = 1) +
labs(title = 'Month is {closest_state}')
p
p
animate(p, fps=10,  end_pause = 20)
p
library(gganimate)
library(transformr)
library(directlabels)
us_monthly <- us_state %>%
mutate(month = month(date),
month_name = month.name[month],
month_name = factor(month.abb[month],levels=month.abb)) %>%
group_by(state, month, month_name) %>%
summarize(
cases = max(cases),
deaths = max(deaths),
population = max(population)
) %>%
filter(cases > 0) %>%
mutate(
deaths_per_1e6 = 1000000 * (deaths / population),
cases_per_1e6 = 1000000 * (cases / population)
) %>%
filter(!is.na(deaths_per_1e6))
p <- plot_usmap(
data = us_monthly,
values = "cases_per_1e6",
color = "black") +
theme(panel.background = element_rect(color = "black", fill = "grey80")) +
theme(legend.position = "right", plot.title = element_text(face = "bold", size = 18, color = "#367588")) +
labs(title = paste0("Cases by County")) +
scale_fill_viridis_c(
name = "Cases by Month",
alpha = 0.5
)
p <- p +
transition_states(month_name, transition_length = 3, state_length = 1) +
labs(title = 'Month is {closest_state}')
animate(p, fps=10,  end_pause = 20)
us_monthly <- us_state %>%
mutate(month = month(date),
month_name = factor(month.name[month],levels=month.name)) %>%
group_by(state, month, month_name) %>%
summarize(
cases = max(cases),
deaths = max(deaths),
population = max(population)
) %>%
filter(cases > 0) %>%
mutate(
deaths_per_1e6 = 1000000 * (deaths / population),
cases_per_1e6 = 1000000 * (cases / population)
) %>%
filter(!is.na(deaths_per_1e6))
us_monthly
library(gganimate)
library(transformr)
library(directlabels)
us_monthly <- us_state %>%
mutate(month = month(date),
month_name = factor(month.name[month],levels=month.name)) %>%
group_by(state, month, month_name) %>%
summarize(
cases = max(cases),
deaths = max(deaths),
population = max(population)
) %>%
filter(cases > 0) %>%
mutate(
deaths_per_1e6 = 1000000 * (deaths / population),
cases_per_1e6 = 1000000 * (cases / population)
) %>%
filter(!is.na(deaths_per_1e6))
p <- plot_usmap(
data = us_monthly,
values = "cases_per_1e6",
color = "black") +
theme(panel.background = element_rect(color = "black", fill = "grey80")) +
theme(legend.position = "right", plot.title = element_text(face = "bold", size = 18, color = "#367588")) +
labs(title = paste0("Cases by County")) +
scale_fill_viridis_c(
name = "Cases by Month",
alpha = 0.5
)
p <- p +
transition_states(month_name, transition_length = 3, state_length = 1) +
labs(title = 'Month is {closest_state}')
animate(p, fps=10,  end_pause = 20)
library(gganimate)
library(transformr)
library(directlabels)
us_monthly <- us_state %>%
mutate(month = month(date),
month_name = factor(month.name[month],levels=month.name)) %>%
group_by(state, month, month_name) %>%
summarize(
cases = max(cases),
deaths = max(deaths),
population = max(population)
) %>%
filter(cases > 0) %>%
mutate(
deaths_per_1e6 = 1000000 * (deaths / population),
cases_per_1e6 = 1000000 * (cases / population)
) %>%
filter(!is.na(deaths_per_1e6))
p <- plot_usmap(
data = us_monthly,
values = "cases_per_1e6",
color = "black") +
theme(panel.background = element_rect(color = "black", fill = "grey80")) +
theme(legend.position = "right", plot.title = element_text(face = "bold", size = 18, color = "#367588")) +
labs(title = paste0("Cases by County")) +
scale_fill_viridis_c(
name = "Cases by Month",
alpha = 0.5
)
p <- p +
transition_states(month_name, transition_length = 3, state_length = 1) +
labs(title = 'Month is {closest_state}')
animate(p, fps=10,  end_pause = 20)
library(gganimate)
library(transformr)
library(directlabels)
us_monthly <- us_state %>%
mutate(month = month(date),
month_name = factor(month.name[month],levels=month.name)) %>%
group_by(state, month, month_name) %>%
summarize(
cases = max(cases),
deaths = max(deaths),
population = max(population)
) %>%
filter(cases > 0) %>%
mutate(
deaths_per_1e6 = 1000000 * (deaths / population),
cases_per_1e6 = 1000000 * (cases / population)
) %>%
filter(!is.na(deaths_per_1e6))
p <- plot_usmap(
data = us_monthly,
values = "cases_per_1e6",
color = "black") +
theme(panel.background = element_rect(color = "black", fill = "grey80")) +
theme(legend.position = "right", plot.title = element_text(face = "bold", size = 18, color = "#367588")) +
labs(title = paste0("Cases by County")) +
scale_fill_viridis_c(
name = "Cases by Month",
alpha = 0.5
)
p <- p +
transition_states(month_name, transition_length = 3, state_length = 2 +
labs(title = 'Month is {closest_state}')
animate(p, fps=10,  end_pause = 20)
data = us_monthly,
us_monthly <- us_state %>%
mutate(month = month(date),
month_name = factor(month.name[month],levels=month.name)) %>%
group_by(state, month, month_name) %>%
summarize(
cases = max(cases),
deaths = max(deaths),
population = max(population)
) %>%
filter(cases > 0) %>%
mutate(
deaths_per_1e6 = 1000000 * (deaths / population),
cases_per_1e6 = 1000000 * (cases / population)
) %>%
filter(!is.na(deaths_per_1e6))
p <- plot_usmap(
data = us_monthly,
values = "cases_per_1e6",
color = "black") +
theme(panel.background = element_rect(color = "black", fill = "grey80")) +
theme(legend.position = "right", plot.title = element_text(face = "bold", size = 18, color = "#367588")) +
labs(title = paste0("Cases by County")) +
scale_fill_viridis_c(
name = "Cases by Month",
alpha = 0.5
)
p <- p +
data = us_monthly,
us_monthly <- us_state %>%
mutate(month = month(date),
month_name = factor(month.name[month],levels=month.name)) %>%
group_by(state, month, month_name) %>%
summarize(
cases = max(cases),
deaths = max(deaths),
population = max(population)
) %>%
filter(cases > 0) %>%
mutate(
deaths_per_1e6 = 1000000 * (deaths / population),
cases_per_1e6 = 1000000 * (cases / population)
) %>%
filter(!is.na(deaths_per_1e6))
data = us_monthly,
us_monthly <- us_state %>%
mutate(month = month(date),
month_name = factor(month.name[month],levels=month.name)) %>%
group_by(state, month, month_name) %>%
summarize(
cases = max(cases),
deaths = max(deaths),
population = max(population)
) %>%
filter(cases > 0) %>%
mutate(
deaths_per_1e6 = 1000000 * (deaths / population),
cases_per_1e6 = 1000000 * (cases / population)
) %>%
filter(!is.na(deaths_per_1e6))
p <- plot_usmap(
data = us_monthly,
values = "cases_per_1e6",
color = "black") +
theme(panel.background = element_rect(color = "black", fill = "grey80")) +
theme(legend.position = "right", plot.title = element_text(face = "bold", size = 18, color = "#367588")) +
labs(title = paste0("Cases by County")) +
scale_fill_viridis_c(
name = "Cases by Month",
alpha = 0.5
)
p <- p +
transition_states(month_name, transition_length = 3, state_length = 2) +
labs(title = 'Month is {closest_state}')
animate(p, fps=10,  end_pause = 20)
library(gganimate)
library(transformr)
library(directlabels)
us_monthly <- us_state %>%
mutate(month = month(date),
month_name = factor(month.name[month],levels=month.name)) %>%
group_by(state, month, month_name) %>%
summarize(
cases = max(cases),
deaths = max(deaths),
population = max(population)
) %>%
filter(cases > 0) %>%
mutate(
deaths_per_1e6 = 1000000 * (deaths / population),
cases_per_1e6 = 1000000 * (cases / population)
) %>%
filter(!is.na(deaths_per_1e6))
p <- plot_usmap(
data = us_monthly,
values = "cases_per_1e6",
color = "black") +
theme(panel.background = element_rect(color = "black", fill = "grey80")) +
theme(legend.position = "right", plot.title = element_text(face = "bold", size = 18, color = "#367588")) +
labs(title = paste0("Cases by County")) +
scale_fill_viridis_c(
name = "Cases by Month",
alpha = 0.5
)
p <- p +
transition_states(month_name) +
labs(title = 'Month is {closest_state}')
animate(p, fps=10,  end_pause = 20)
?animate
animate(p, fps=5, end_pause = 20)
animate(p, fps=20, end_pause = 20)
library(gganimate)
library(transformr)
library(directlabels)
us_monthly <- us_state %>%
mutate(month = month(date),
month_name = factor(month.name[month],levels=month.name)) %>%
group_by(state, month, month_name) %>%
summarize(
cases = max(cases),
deaths = max(deaths),
population = max(population)
) %>%
filter(cases > 0) %>%
mutate(
deaths_per_1e6 = 1000000 * (deaths / population),
cases_per_1e6 = 1000000 * (cases / population)
) %>%
filter(!is.na(deaths_per_1e6))
p <- plot_usmap(
data = us_monthly,
values = "cases_per_1e6",
color = "black") +
theme(panel.background = element_rect(color = "black", fill = "grey80")) +
theme(legend.position = "right", plot.title = element_text(face = "bold", size = 18, color = "#367588")) +
labs(title = paste0("Cases by County")) +
scale_fill_viridis_c(
name = "Cases by Month",
alpha = 0.5
)
p <- p +
transition_states(month_name) +
labs(title = 'Month is {closest_state}')
animate(p, fps=5, end_pause = 20)
