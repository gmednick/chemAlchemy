---
title: "Palmer penguins"
author: "Gabe Mednick"
date: '2021-07-07'
output:
  html_document:
    df_print: paged
categories: []
tags: []
subtitle: ''
summary: Having fun with penguin predictions 
authors: []
lastmod: ''
featured: no
image:
  caption: ''
  focal_point: ''
  preview_only: no
projects: []
slug: penguin
---

<script src="{{< blogdown/postref >}}index_files/header-attrs/header-attrs.js"></script>


<p>:penguin: :penguin: :penguin: :penguin: :penguin: :penguin: :penguin: :penguin: :penguin: :penguin: :penguin: :penguin: :penguin: :penguin: :penguin: :penguin: :penguin: :penguin: :penguin: :penguin: :penguin: :penguin: :penguin: :penguin: :penguin: :penguin: :penguin:</p>
<div id="introduction" class="section level2">
<h2>Introduction</h2>
<p>In this post, I use the Palmer penguins dataset to create a classification model for predicting penguin species. The data contains three penguin species and includes measurements of bill length, bill depth, flipper length and body mass. We will use bill length and depth as explanatory variables and accuracy will be the metric used to compare model performance. The following models are compared: <strong>multinomia lregression</strong>, <strong>random forest</strong>, <strong>k-nearest neighbors</strong> and <strong>xgboost</strong>.</p>
<p>After training these models and comparing the results, we will convert the script into a command line tool that lets the user select a model, bill length and bill depth, and returns the predicted penguin species. If you find yourself predicting penguins in the Palmer Archipelago, this tool was made for you :smile:!</p>
<pre class="r"><code>library(tidyverse)
library(palmerpenguins)
library(gt)
library(patchwork)
theme_set(theme_light())

#load data from the palmerpenguins package
palmer_df &lt;- read_csv(path_to_file(&quot;penguins.csv&quot;))

palmer_df %&gt;% head() %&gt;% 
  gt() %&gt;%
  tab_style(
    style = list(
      cell_fill(color = &quot;#2D6A65&quot;),
      cell_text(weight = &quot;bold&quot;)
      ),
    locations = cells_body(
    )    
  )</code></pre>
<div id="lgbohxjvrx" style="overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>html {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;
}

#lgbohxjvrx .gt_table {
  display: table;
  border-collapse: collapse;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#lgbohxjvrx .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#lgbohxjvrx .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#lgbohxjvrx .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 0;
  padding-bottom: 4px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#lgbohxjvrx .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#lgbohxjvrx .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#lgbohxjvrx .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#lgbohxjvrx .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#lgbohxjvrx .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#lgbohxjvrx .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#lgbohxjvrx .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#lgbohxjvrx .gt_group_heading {
  padding: 8px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
}

#lgbohxjvrx .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#lgbohxjvrx .gt_from_md > :first-child {
  margin-top: 0;
}

#lgbohxjvrx .gt_from_md > :last-child {
  margin-bottom: 0;
}

#lgbohxjvrx .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#lgbohxjvrx .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 12px;
}

#lgbohxjvrx .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#lgbohxjvrx .gt_first_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
}

#lgbohxjvrx .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#lgbohxjvrx .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#lgbohxjvrx .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#lgbohxjvrx .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#lgbohxjvrx .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#lgbohxjvrx .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding: 4px;
}

#lgbohxjvrx .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#lgbohxjvrx .gt_sourcenote {
  font-size: 90%;
  padding: 4px;
}

#lgbohxjvrx .gt_left {
  text-align: left;
}

#lgbohxjvrx .gt_center {
  text-align: center;
}

#lgbohxjvrx .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#lgbohxjvrx .gt_font_normal {
  font-weight: normal;
}

#lgbohxjvrx .gt_font_bold {
  font-weight: bold;
}

#lgbohxjvrx .gt_font_italic {
  font-style: italic;
}

#lgbohxjvrx .gt_super {
  font-size: 65%;
}

#lgbohxjvrx .gt_footnote_marks {
  font-style: italic;
  font-weight: normal;
  font-size: 65%;
}
</style>
<table class="gt_table">
  
  <thead class="gt_col_headings">
    <tr>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1">species</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1">island</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1">bill_length_mm</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1">bill_depth_mm</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1">flipper_length_mm</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1">body_mass_g</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1">sex</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1">year</th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr><td class="gt_row gt_left" style="background-color: #2D6A65; font-weight: bold;">Adelie</td>
<td class="gt_row gt_left" style="background-color: #2D6A65; font-weight: bold;">Torgersen</td>
<td class="gt_row gt_right" style="background-color: #2D6A65; font-weight: bold;">39.1</td>
<td class="gt_row gt_right" style="background-color: #2D6A65; font-weight: bold;">18.7</td>
<td class="gt_row gt_right" style="background-color: #2D6A65; font-weight: bold;">181</td>
<td class="gt_row gt_right" style="background-color: #2D6A65; font-weight: bold;">3750</td>
<td class="gt_row gt_left" style="background-color: #2D6A65; font-weight: bold;">male</td>
<td class="gt_row gt_right" style="background-color: #2D6A65; font-weight: bold;">2007</td></tr>
    <tr><td class="gt_row gt_left" style="background-color: #2D6A65; font-weight: bold;">Adelie</td>
<td class="gt_row gt_left" style="background-color: #2D6A65; font-weight: bold;">Torgersen</td>
<td class="gt_row gt_right" style="background-color: #2D6A65; font-weight: bold;">39.5</td>
<td class="gt_row gt_right" style="background-color: #2D6A65; font-weight: bold;">17.4</td>
<td class="gt_row gt_right" style="background-color: #2D6A65; font-weight: bold;">186</td>
<td class="gt_row gt_right" style="background-color: #2D6A65; font-weight: bold;">3800</td>
<td class="gt_row gt_left" style="background-color: #2D6A65; font-weight: bold;">female</td>
<td class="gt_row gt_right" style="background-color: #2D6A65; font-weight: bold;">2007</td></tr>
    <tr><td class="gt_row gt_left" style="background-color: #2D6A65; font-weight: bold;">Adelie</td>
<td class="gt_row gt_left" style="background-color: #2D6A65; font-weight: bold;">Torgersen</td>
<td class="gt_row gt_right" style="background-color: #2D6A65; font-weight: bold;">40.3</td>
<td class="gt_row gt_right" style="background-color: #2D6A65; font-weight: bold;">18.0</td>
<td class="gt_row gt_right" style="background-color: #2D6A65; font-weight: bold;">195</td>
<td class="gt_row gt_right" style="background-color: #2D6A65; font-weight: bold;">3250</td>
<td class="gt_row gt_left" style="background-color: #2D6A65; font-weight: bold;">female</td>
<td class="gt_row gt_right" style="background-color: #2D6A65; font-weight: bold;">2007</td></tr>
    <tr><td class="gt_row gt_left" style="background-color: #2D6A65; font-weight: bold;">Adelie</td>
<td class="gt_row gt_left" style="background-color: #2D6A65; font-weight: bold;">Torgersen</td>
<td class="gt_row gt_right" style="background-color: #2D6A65; font-weight: bold;">NA</td>
<td class="gt_row gt_right" style="background-color: #2D6A65; font-weight: bold;">NA</td>
<td class="gt_row gt_right" style="background-color: #2D6A65; font-weight: bold;">NA</td>
<td class="gt_row gt_right" style="background-color: #2D6A65; font-weight: bold;">NA</td>
<td class="gt_row gt_left" style="background-color: #2D6A65; font-weight: bold;">NA</td>
<td class="gt_row gt_right" style="background-color: #2D6A65; font-weight: bold;">2007</td></tr>
    <tr><td class="gt_row gt_left" style="background-color: #2D6A65; font-weight: bold;">Adelie</td>
<td class="gt_row gt_left" style="background-color: #2D6A65; font-weight: bold;">Torgersen</td>
<td class="gt_row gt_right" style="background-color: #2D6A65; font-weight: bold;">36.7</td>
<td class="gt_row gt_right" style="background-color: #2D6A65; font-weight: bold;">19.3</td>
<td class="gt_row gt_right" style="background-color: #2D6A65; font-weight: bold;">193</td>
<td class="gt_row gt_right" style="background-color: #2D6A65; font-weight: bold;">3450</td>
<td class="gt_row gt_left" style="background-color: #2D6A65; font-weight: bold;">female</td>
<td class="gt_row gt_right" style="background-color: #2D6A65; font-weight: bold;">2007</td></tr>
    <tr><td class="gt_row gt_left" style="background-color: #2D6A65; font-weight: bold;">Adelie</td>
<td class="gt_row gt_left" style="background-color: #2D6A65; font-weight: bold;">Torgersen</td>
<td class="gt_row gt_right" style="background-color: #2D6A65; font-weight: bold;">39.3</td>
<td class="gt_row gt_right" style="background-color: #2D6A65; font-weight: bold;">20.6</td>
<td class="gt_row gt_right" style="background-color: #2D6A65; font-weight: bold;">190</td>
<td class="gt_row gt_right" style="background-color: #2D6A65; font-weight: bold;">3650</td>
<td class="gt_row gt_left" style="background-color: #2D6A65; font-weight: bold;">male</td>
<td class="gt_row gt_right" style="background-color: #2D6A65; font-weight: bold;">2007</td></tr>
  </tbody>
  
  
</table>
</div>
<pre class="r"><code>palmer_df %&gt;% 
  count(species) %&gt;% 
  gt() %&gt;%
  tab_style(
    style = list(
      cell_fill(color = &quot;#2D6A65&quot;),       
      cell_text(weight = &quot;bold&quot;)
      ),
    locations = cells_body(
    )    
  )</code></pre>
<div id="aqynjsbqzd" style="overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>html {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;
}

#aqynjsbqzd .gt_table {
  display: table;
  border-collapse: collapse;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#aqynjsbqzd .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#aqynjsbqzd .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#aqynjsbqzd .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 0;
  padding-bottom: 4px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#aqynjsbqzd .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#aqynjsbqzd .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#aqynjsbqzd .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#aqynjsbqzd .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#aqynjsbqzd .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#aqynjsbqzd .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#aqynjsbqzd .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#aqynjsbqzd .gt_group_heading {
  padding: 8px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
}

#aqynjsbqzd .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#aqynjsbqzd .gt_from_md > :first-child {
  margin-top: 0;
}

#aqynjsbqzd .gt_from_md > :last-child {
  margin-bottom: 0;
}

#aqynjsbqzd .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#aqynjsbqzd .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 12px;
}

#aqynjsbqzd .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#aqynjsbqzd .gt_first_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
}

#aqynjsbqzd .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#aqynjsbqzd .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#aqynjsbqzd .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#aqynjsbqzd .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#aqynjsbqzd .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#aqynjsbqzd .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding: 4px;
}

#aqynjsbqzd .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#aqynjsbqzd .gt_sourcenote {
  font-size: 90%;
  padding: 4px;
}

#aqynjsbqzd .gt_left {
  text-align: left;
}

#aqynjsbqzd .gt_center {
  text-align: center;
}

#aqynjsbqzd .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#aqynjsbqzd .gt_font_normal {
  font-weight: normal;
}

#aqynjsbqzd .gt_font_bold {
  font-weight: bold;
}

#aqynjsbqzd .gt_font_italic {
  font-style: italic;
}

#aqynjsbqzd .gt_super {
  font-size: 65%;
}

#aqynjsbqzd .gt_footnote_marks {
  font-style: italic;
  font-weight: normal;
  font-size: 65%;
}
</style>
<table class="gt_table">
  
  <thead class="gt_col_headings">
    <tr>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1">species</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1">n</th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr><td class="gt_row gt_left" style="background-color: #2D6A65; font-weight: bold;">Adelie</td>
<td class="gt_row gt_right" style="background-color: #2D6A65; font-weight: bold;">152</td></tr>
    <tr><td class="gt_row gt_left" style="background-color: #2D6A65; font-weight: bold;">Chinstrap</td>
<td class="gt_row gt_right" style="background-color: #2D6A65; font-weight: bold;">68</td></tr>
    <tr><td class="gt_row gt_left" style="background-color: #2D6A65; font-weight: bold;">Gentoo</td>
<td class="gt_row gt_right" style="background-color: #2D6A65; font-weight: bold;">124</td></tr>
  </tbody>
  
  
</table>
</div>
<pre class="r"><code>palmer_df %&gt;% 
  count(island) %&gt;% 
  gt() %&gt;%
  tab_style(
    style = list(
      cell_fill(color = &quot;#2D6A65&quot;),
      cell_text(weight = &quot;bold&quot;)
      ),
    locations = cells_body(
    )    
  )</code></pre>
<div id="bwfravfjbm" style="overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>html {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;
}

#bwfravfjbm .gt_table {
  display: table;
  border-collapse: collapse;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#bwfravfjbm .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#bwfravfjbm .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#bwfravfjbm .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 0;
  padding-bottom: 4px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#bwfravfjbm .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#bwfravfjbm .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#bwfravfjbm .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#bwfravfjbm .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#bwfravfjbm .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#bwfravfjbm .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#bwfravfjbm .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#bwfravfjbm .gt_group_heading {
  padding: 8px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
}

#bwfravfjbm .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#bwfravfjbm .gt_from_md > :first-child {
  margin-top: 0;
}

#bwfravfjbm .gt_from_md > :last-child {
  margin-bottom: 0;
}

#bwfravfjbm .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#bwfravfjbm .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 12px;
}

#bwfravfjbm .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#bwfravfjbm .gt_first_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
}

#bwfravfjbm .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#bwfravfjbm .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#bwfravfjbm .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#bwfravfjbm .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#bwfravfjbm .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#bwfravfjbm .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding: 4px;
}

#bwfravfjbm .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#bwfravfjbm .gt_sourcenote {
  font-size: 90%;
  padding: 4px;
}

#bwfravfjbm .gt_left {
  text-align: left;
}

#bwfravfjbm .gt_center {
  text-align: center;
}

#bwfravfjbm .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#bwfravfjbm .gt_font_normal {
  font-weight: normal;
}

#bwfravfjbm .gt_font_bold {
  font-weight: bold;
}

#bwfravfjbm .gt_font_italic {
  font-style: italic;
}

#bwfravfjbm .gt_super {
  font-size: 65%;
}

#bwfravfjbm .gt_footnote_marks {
  font-style: italic;
  font-weight: normal;
  font-size: 65%;
}
</style>
<table class="gt_table">
  
  <thead class="gt_col_headings">
    <tr>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1">island</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1">n</th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr><td class="gt_row gt_left" style="background-color: #2D6A65; font-weight: bold;">Biscoe</td>
<td class="gt_row gt_right" style="background-color: #2D6A65; font-weight: bold;">168</td></tr>
    <tr><td class="gt_row gt_left" style="background-color: #2D6A65; font-weight: bold;">Dream</td>
<td class="gt_row gt_right" style="background-color: #2D6A65; font-weight: bold;">124</td></tr>
    <tr><td class="gt_row gt_left" style="background-color: #2D6A65; font-weight: bold;">Torgersen</td>
<td class="gt_row gt_right" style="background-color: #2D6A65; font-weight: bold;">52</td></tr>
  </tbody>
  
  
</table>
</div>
<pre class="r"><code>palmer_df %&gt;% 
  count(species, island) %&gt;% 
  gt() %&gt;%
  tab_style(
    style = list(
      cell_fill(color = &quot;#2D6A65&quot;),
      cell_text(weight = &quot;bold&quot;)
      ),
    locations = cells_body(
    )    
  )#since chinstrap and gentoo inhabit Dream and Biscoe repectively, it would not be a fair predictor variable</code></pre>
<div id="jxrfcjoeux" style="overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>html {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;
}

#jxrfcjoeux .gt_table {
  display: table;
  border-collapse: collapse;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#jxrfcjoeux .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#jxrfcjoeux .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#jxrfcjoeux .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 0;
  padding-bottom: 4px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#jxrfcjoeux .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#jxrfcjoeux .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#jxrfcjoeux .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#jxrfcjoeux .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#jxrfcjoeux .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#jxrfcjoeux .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#jxrfcjoeux .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#jxrfcjoeux .gt_group_heading {
  padding: 8px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
}

#jxrfcjoeux .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#jxrfcjoeux .gt_from_md > :first-child {
  margin-top: 0;
}

#jxrfcjoeux .gt_from_md > :last-child {
  margin-bottom: 0;
}

#jxrfcjoeux .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#jxrfcjoeux .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 12px;
}

#jxrfcjoeux .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#jxrfcjoeux .gt_first_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
}

#jxrfcjoeux .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#jxrfcjoeux .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#jxrfcjoeux .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#jxrfcjoeux .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#jxrfcjoeux .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#jxrfcjoeux .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding: 4px;
}

#jxrfcjoeux .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#jxrfcjoeux .gt_sourcenote {
  font-size: 90%;
  padding: 4px;
}

#jxrfcjoeux .gt_left {
  text-align: left;
}

#jxrfcjoeux .gt_center {
  text-align: center;
}

#jxrfcjoeux .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#jxrfcjoeux .gt_font_normal {
  font-weight: normal;
}

#jxrfcjoeux .gt_font_bold {
  font-weight: bold;
}

#jxrfcjoeux .gt_font_italic {
  font-style: italic;
}

#jxrfcjoeux .gt_super {
  font-size: 65%;
}

#jxrfcjoeux .gt_footnote_marks {
  font-style: italic;
  font-weight: normal;
  font-size: 65%;
}
</style>
<table class="gt_table">
  
  <thead class="gt_col_headings">
    <tr>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1">species</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1">island</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1">n</th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr><td class="gt_row gt_left" style="background-color: #2D6A65; font-weight: bold;">Adelie</td>
<td class="gt_row gt_left" style="background-color: #2D6A65; font-weight: bold;">Biscoe</td>
<td class="gt_row gt_right" style="background-color: #2D6A65; font-weight: bold;">44</td></tr>
    <tr><td class="gt_row gt_left" style="background-color: #2D6A65; font-weight: bold;">Adelie</td>
<td class="gt_row gt_left" style="background-color: #2D6A65; font-weight: bold;">Dream</td>
<td class="gt_row gt_right" style="background-color: #2D6A65; font-weight: bold;">56</td></tr>
    <tr><td class="gt_row gt_left" style="background-color: #2D6A65; font-weight: bold;">Adelie</td>
<td class="gt_row gt_left" style="background-color: #2D6A65; font-weight: bold;">Torgersen</td>
<td class="gt_row gt_right" style="background-color: #2D6A65; font-weight: bold;">52</td></tr>
    <tr><td class="gt_row gt_left" style="background-color: #2D6A65; font-weight: bold;">Chinstrap</td>
<td class="gt_row gt_left" style="background-color: #2D6A65; font-weight: bold;">Dream</td>
<td class="gt_row gt_right" style="background-color: #2D6A65; font-weight: bold;">68</td></tr>
    <tr><td class="gt_row gt_left" style="background-color: #2D6A65; font-weight: bold;">Gentoo</td>
<td class="gt_row gt_left" style="background-color: #2D6A65; font-weight: bold;">Biscoe</td>
<td class="gt_row gt_right" style="background-color: #2D6A65; font-weight: bold;">124</td></tr>
  </tbody>
  
  
</table>
</div>
<pre class="r"><code>palmer_df %&gt;% 
  summarize(min_year = min(year),
            max_year = max(year),
            observations = n(),
            missing_obs = sum(is.na(.))) %&gt;% 
  gt() %&gt;%   tab_style(     style = list(       cell_fill(color = &quot;#2D6A65&quot;)       ),     locations = cells_body(     )       ) %&gt;%
  tab_style(
    style = list(
      cell_fill(color = &quot;#2D6A65&quot;),
      cell_text(weight = &quot;bold&quot;)
      ),
    locations = cells_body(
    )    
  )</code></pre>
<div id="azbbnrkkpc" style="overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>html {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;
}

#azbbnrkkpc .gt_table {
  display: table;
  border-collapse: collapse;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#azbbnrkkpc .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#azbbnrkkpc .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#azbbnrkkpc .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 0;
  padding-bottom: 4px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#azbbnrkkpc .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#azbbnrkkpc .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#azbbnrkkpc .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#azbbnrkkpc .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#azbbnrkkpc .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#azbbnrkkpc .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#azbbnrkkpc .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#azbbnrkkpc .gt_group_heading {
  padding: 8px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
}

#azbbnrkkpc .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#azbbnrkkpc .gt_from_md > :first-child {
  margin-top: 0;
}

#azbbnrkkpc .gt_from_md > :last-child {
  margin-bottom: 0;
}

#azbbnrkkpc .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#azbbnrkkpc .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 12px;
}

#azbbnrkkpc .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#azbbnrkkpc .gt_first_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
}

#azbbnrkkpc .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#azbbnrkkpc .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#azbbnrkkpc .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#azbbnrkkpc .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#azbbnrkkpc .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#azbbnrkkpc .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding: 4px;
}

#azbbnrkkpc .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#azbbnrkkpc .gt_sourcenote {
  font-size: 90%;
  padding: 4px;
}

#azbbnrkkpc .gt_left {
  text-align: left;
}

#azbbnrkkpc .gt_center {
  text-align: center;
}

#azbbnrkkpc .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#azbbnrkkpc .gt_font_normal {
  font-weight: normal;
}

#azbbnrkkpc .gt_font_bold {
  font-weight: bold;
}

#azbbnrkkpc .gt_font_italic {
  font-style: italic;
}

#azbbnrkkpc .gt_super {
  font-size: 65%;
}

#azbbnrkkpc .gt_footnote_marks {
  font-style: italic;
  font-weight: normal;
  font-size: 65%;
}
</style>
<table class="gt_table">
  
  <thead class="gt_col_headings">
    <tr>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1">min_year</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1">max_year</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1">observations</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1">missing_obs</th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr><td class="gt_row gt_right" style="background-color: #2D6A65; font-weight: bold;">2007</td>
<td class="gt_row gt_right" style="background-color: #2D6A65; font-weight: bold;">2009</td>
<td class="gt_row gt_right" style="background-color: #2D6A65; font-weight: bold;">344</td>
<td class="gt_row gt_right" style="background-color: #2D6A65; font-weight: bold;">19</td></tr>
  </tbody>
  
  
</table>
</div>
<pre class="r"><code>palmer_long &lt;- palmer_df %&gt;% 
  drop_na() %&gt;%
  pivot_longer(bill_length_mm:body_mass_g, 
               names_to = &quot;characteristic&quot;, 
               values_to = &quot;value&quot;) 

palmer_long %&gt;%
  group_by(species) %&gt;% 
 # filter(characteristic != &quot;body_mass_g&quot;) %&gt;% 
  ggplot(aes(value, species, fill = species)) +
  geom_boxplot() +
  facet_wrap(~characteristic, scales = &#39;free_x&#39;) +
  theme(legend.position = &#39;none&#39;) +
  scale_fill_viridis_d()</code></pre>
<p><img src="{{< blogdown/postref >}}index_files/figure-html/unnamed-chunk-2-1.png" width="672" /></p>
<pre class="r"><code>palmer_long %&gt;%
  group_by(species) %&gt;% 
 # filter(characteristic != &quot;body_mass_g&quot;) %&gt;% 
  ggplot(aes(value, species, fill = sex)) +
  geom_boxplot() +
  facet_wrap(~characteristic, scales = &#39;free_x&#39;) +
  scale_fill_discrete(type = c(&quot;#DCE318FF&quot;, &quot;#287D8EFF&quot;))</code></pre>
<p><img src="{{< blogdown/postref >}}index_files/figure-html/unnamed-chunk-3-1.png" width="672" /></p>
<pre class="r"><code>palmer_long %&gt;%
  group_by(species) %&gt;% 
 # filter(characteristic != &quot;body_mass_g&quot;) %&gt;% 
  ggplot(aes(value, fill = species)) +
  geom_density(alpha = 0.5) +
  facet_wrap(~characteristic, scales = &#39;free&#39;) +
  theme(legend.position = &#39;none&#39;) +
  scale_fill_viridis_d()</code></pre>
<p><img src="{{< blogdown/postref >}}index_files/figure-html/unnamed-chunk-4-1.png" width="672" /></p>
<pre class="r"><code>palmer_df %&gt;% 
  group_by(species) %&gt;% 
  drop_na() %&gt;% 
  summarize(`average bill depth` = median(bill_depth_mm),
            `average bill length` = median(bill_length_mm),
            `average body mass` = median(body_mass_g),
            `average flipper length` = median(flipper_length_mm)) %&gt;% 
  mutate(across(.cols = starts_with(&quot;average&quot;), .fns = round))  %&gt;% #across(.cols = everything(), .fns = NULL, ..., .names = NULL)
  gt() %&gt;%
  tab_style(
    style = list(
      cell_fill(color = &quot;#2D6A65&quot;),
      cell_text(weight = &quot;bold&quot;)
      ),
    locations = cells_body(
    )    
  )</code></pre>
<div id="wovtiakgyz" style="overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>html {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;
}

#wovtiakgyz .gt_table {
  display: table;
  border-collapse: collapse;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#wovtiakgyz .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#wovtiakgyz .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#wovtiakgyz .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 0;
  padding-bottom: 4px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#wovtiakgyz .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#wovtiakgyz .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#wovtiakgyz .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#wovtiakgyz .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#wovtiakgyz .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#wovtiakgyz .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#wovtiakgyz .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#wovtiakgyz .gt_group_heading {
  padding: 8px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
}

#wovtiakgyz .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#wovtiakgyz .gt_from_md > :first-child {
  margin-top: 0;
}

#wovtiakgyz .gt_from_md > :last-child {
  margin-bottom: 0;
}

#wovtiakgyz .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#wovtiakgyz .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 12px;
}

#wovtiakgyz .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#wovtiakgyz .gt_first_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
}

#wovtiakgyz .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#wovtiakgyz .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#wovtiakgyz .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#wovtiakgyz .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#wovtiakgyz .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#wovtiakgyz .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding: 4px;
}

#wovtiakgyz .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#wovtiakgyz .gt_sourcenote {
  font-size: 90%;
  padding: 4px;
}

#wovtiakgyz .gt_left {
  text-align: left;
}

#wovtiakgyz .gt_center {
  text-align: center;
}

#wovtiakgyz .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#wovtiakgyz .gt_font_normal {
  font-weight: normal;
}

#wovtiakgyz .gt_font_bold {
  font-weight: bold;
}

#wovtiakgyz .gt_font_italic {
  font-style: italic;
}

#wovtiakgyz .gt_super {
  font-size: 65%;
}

#wovtiakgyz .gt_footnote_marks {
  font-style: italic;
  font-weight: normal;
  font-size: 65%;
}
</style>
<table class="gt_table">
  
  <thead class="gt_col_headings">
    <tr>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1">species</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1">average bill depth</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1">average bill length</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1">average body mass</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1">average flipper length</th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr><td class="gt_row gt_left" style="background-color: #2D6A65; font-weight: bold;">Adelie</td>
<td class="gt_row gt_right" style="background-color: #2D6A65; font-weight: bold;">18</td>
<td class="gt_row gt_right" style="background-color: #2D6A65; font-weight: bold;">39</td>
<td class="gt_row gt_right" style="background-color: #2D6A65; font-weight: bold;">3700</td>
<td class="gt_row gt_right" style="background-color: #2D6A65; font-weight: bold;">190</td></tr>
    <tr><td class="gt_row gt_left" style="background-color: #2D6A65; font-weight: bold;">Chinstrap</td>
<td class="gt_row gt_right" style="background-color: #2D6A65; font-weight: bold;">18</td>
<td class="gt_row gt_right" style="background-color: #2D6A65; font-weight: bold;">50</td>
<td class="gt_row gt_right" style="background-color: #2D6A65; font-weight: bold;">3700</td>
<td class="gt_row gt_right" style="background-color: #2D6A65; font-weight: bold;">196</td></tr>
    <tr><td class="gt_row gt_left" style="background-color: #2D6A65; font-weight: bold;">Gentoo</td>
<td class="gt_row gt_right" style="background-color: #2D6A65; font-weight: bold;">15</td>
<td class="gt_row gt_right" style="background-color: #2D6A65; font-weight: bold;">47</td>
<td class="gt_row gt_right" style="background-color: #2D6A65; font-weight: bold;">5050</td>
<td class="gt_row gt_right" style="background-color: #2D6A65; font-weight: bold;">216</td></tr>
  </tbody>
  
  
</table>
</div>
</div>
<div id="prediction-model" class="section level2">
<h2>Prediction model</h2>
<pre class="r"><code>library(tidymodels)
set.seed(777)

spl &lt;- palmer_df %&gt;% initial_split(prop = .8, strata = species)

palmer_train &lt;- training(spl)

palmer_test &lt;- testing(spl)

cv_resamples &lt;- palmer_train %&gt;% vfold_cv()</code></pre>
<p>Before we can train our models, we need to decide which feature engineering steps are needed. We also need to specify the formula that tells our model what we are predicting and which explanatory features to use.</p>
<pre class="r"><code>recipe_1 &lt;- recipe(species ~ ., data = palmer_train) %&gt;% 
  step_impute_median(all_numeric_predictors()) %&gt;%
  step_corr(all_numeric_predictors()) %&gt;% 
  step_impute_knn(sex) %&gt;% 
  step_dummy(all_nominal(), -all_outcomes()) %&gt;% 
  step_normalize(all_numeric_predictors()) 

recipe &lt;- recipe(species ~ bill_length_mm + bill_depth_mm, data = palmer_train) %&gt;% 
  step_impute_median(all_predictors()) %&gt;%
  step_normalize(all_predictors()) </code></pre>
</div>
<div id="create-models-set-modes-and-engines" class="section level2">
<h2>Create models, set modes and engines</h2>
<pre class="r"><code>mn_mod &lt;- multinom_reg() %&gt;% 
  set_mode(&quot;classification&quot;) %&gt;% 
  set_engine(&#39;nnet&#39;)
  
rf_mod &lt;- rand_forest() %&gt;% 
  set_mode(&quot;classification&quot;) %&gt;% 
  set_engine(&quot;ranger&quot;)

knn_mod &lt;- nearest_neighbor() %&gt;% 
  set_mode(&quot;classification&quot;) %&gt;% 
  set_engine(&quot;kknn&quot;)

xg_mod &lt;- boost_tree() %&gt;%
  set_mode(&quot;classification&quot;) %&gt;%
  set_engine(&quot;xgboost&quot;)</code></pre>
</div>
<div id="weaving-it-together-with-workflow" class="section level2">
<h2>Weaving it together with <code>workflow()</code></h2>
<div id="multinomial-regression-model" class="section level4">
<h4>Multinomial regression model</h4>
<pre class="r"><code>mn_workflow &lt;- workflow() %&gt;% 
  add_recipe(recipe) %&gt;% 
  add_model(mn_mod)

mn_mod_fit &lt;- mn_workflow %&gt;% 
  fit(data = palmer_train)

mn_mod_preds &lt;- mn_mod_fit %&gt;% 
  predict(new_data = palmer_test,
          type = &#39;class&#39;)

mn_results &lt;- palmer_test %&gt;% 
  select(species) %&gt;% 
  bind_cols(mn_mod_preds) 

metrics &lt;- metric_set(accuracy, sens, spec)

metric_results &lt;- mn_results %&gt;%
  mutate_if(is.character, as.factor) %&gt;% 
  mutate(model = &#39;multinom_reg&#39;) %&gt;% 
  metrics(truth = species,
          estimate = .pred_class)

mn_p &lt;- mn_results %&gt;% conf_mat(.,
         truth = species,
         estimate = .pred_class) %&gt;% 
  autoplot(type = &quot;heatmap&quot;) +
  ggtitle(&quot;Multinomial regression&quot;)</code></pre>
</div>
<div id="random-forest-model" class="section level4">
<h4>Random Forest model</h4>
<pre class="r"><code>rf_workflow &lt;- workflow() %&gt;% 
  add_recipe(recipe) %&gt;% 
  add_model(rf_mod) 

rf_mod_fit &lt;- rf_workflow %&gt;% 
  fit(data = palmer_train)

rf_mod_preds &lt;- rf_mod_fit %&gt;% 
  predict(new_data = palmer_test,
          type = &#39;class&#39;)

rf_results &lt;- palmer_test %&gt;% 
  select(species) %&gt;% 
  bind_cols(rf_mod_preds) 

rf_results %&gt;% 
  mutate_if(is.character, as.factor) %&gt;% 
  mutate(model = &#39;rf_mod&#39;) %&gt;% 
  metrics(truth = species,
          estimate = .pred_class)</code></pre>
<pre><code>## # A tibble: 3 x 3
##   .metric  .estimator .estimate
##   &lt;chr&gt;    &lt;chr&gt;          &lt;dbl&gt;
## 1 accuracy multiclass     0.971
## 2 sens     macro          0.976
## 3 spec     macro          0.988</code></pre>
<pre class="r"><code>rf_p &lt;- rf_results %&gt;% conf_mat(.,
         truth = species,
         estimate = .pred_class) %&gt;% 
  autoplot(type = &quot;heatmap&quot;) +
  ggtitle(&quot;Random forest&quot;)</code></pre>
</div>
<div id="k-nearest-neighbors-model" class="section level4">
<h4>K-nearest neighbors model</h4>
<pre class="r"><code>knn_workflow &lt;- workflow() %&gt;% 
  add_recipe(recipe) %&gt;% 
  add_model(knn_mod) 

knn_mod_fit &lt;- knn_workflow %&gt;% 
  fit(data = palmer_train)

knn_mod_preds &lt;- knn_mod_fit %&gt;% 
  predict(new_data = palmer_test,
          type = &#39;class&#39;)

knn_results &lt;- palmer_test %&gt;% 
  select(species) %&gt;% 
  bind_cols(knn_mod_preds) 

knn_results %&gt;% 
  mutate_if(is.character, as.factor) %&gt;% 
  mutate(model = &#39;knn_mod&#39;) %&gt;% 
  metrics(truth = species,
          estimate = .pred_class)</code></pre>
<pre><code>## # A tibble: 3 x 3
##   .metric  .estimator .estimate
##   &lt;chr&gt;    &lt;chr&gt;          &lt;dbl&gt;
## 1 accuracy multiclass     0.971
## 2 sens     macro          0.976
## 3 spec     macro          0.986</code></pre>
<pre class="r"><code>knn_p &lt;- knn_results %&gt;% conf_mat(.,
         truth = species,
         estimate = .pred_class) %&gt;% 
  autoplot(type = &quot;heatmap&quot;) +
  ggtitle(&quot;k-nearest neighbors&quot;)</code></pre>
</div>
<div id="xgboost-model" class="section level4">
<h4>Xgboost model</h4>
<pre class="r"><code>xg_workflow &lt;- workflow() %&gt;% 
  add_recipe(recipe) %&gt;% 
  add_model(xg_mod)

xg_mod_fit &lt;- xg_workflow %&gt;% 
  fit(data = palmer_train)</code></pre>
<pre><code>## [13:35:46] WARNING: amalgamation/../src/learner.cc:1095: Starting in XGBoost 1.3.0, the default evaluation metric used with the objective &#39;multi:softprob&#39; was changed from &#39;merror&#39; to &#39;mlogloss&#39;. Explicitly set eval_metric if you&#39;d like to restore the old behavior.</code></pre>
<pre class="r"><code>xg_mod_preds &lt;- xg_mod_fit %&gt;% 
  predict(new_data = palmer_test,
          type = &#39;class&#39;)

xg_results &lt;- palmer_test %&gt;% 
  select(species) %&gt;% 
  bind_cols(xg_mod_preds) 

metrics &lt;- metric_set(accuracy, sens, spec)

xg_results %&gt;%
  mutate_if(is.character, as.factor) %&gt;% 
  mutate(model = &#39;xgboost&#39;) %&gt;% 
  metrics(truth = species,
          estimate = .pred_class)</code></pre>
<pre><code>## # A tibble: 3 x 3
##   .metric  .estimator .estimate
##   &lt;chr&gt;    &lt;chr&gt;          &lt;dbl&gt;
## 1 accuracy multiclass     0.971
## 2 sens     macro          0.976
## 3 spec     macro          0.986</code></pre>
<pre class="r"><code>xg_p &lt;- xg_results %&gt;% conf_mat(.,
         truth = species,
         estimate = .pred_class) %&gt;% 
  autoplot(type = &quot;heatmap&quot;) +
  ggtitle(&quot;XGBoost&quot;)</code></pre>
</div>
<div id="confusion-matrices" class="section level4">
<h4>Confusion matrices</h4>
<pre class="r"><code>(mn_p + rf_p) / (knn_p + xg_p)</code></pre>
<p><img src="{{< blogdown/postref >}}index_files/figure-html/unnamed-chunk-13-1.png" width="672" /></p>
</div>
<div id="results-table" class="section level4">
<h4>Results table</h4>
<pre class="r"><code>metric_results &lt;- mn_results %&gt;%
  mutate_if(is.character, as.factor) %&gt;% 
  mutate(model = &#39;multinom_reg&#39;) %&gt;% 
  metrics(truth = species,
          estimate = .pred_class) %&gt;% 
  bind_rows(rf_results %&gt;% 
  mutate_if(is.character, as.factor) %&gt;% 
  mutate(model = &#39;rf_mod&#39;) %&gt;% 
  metrics(truth = species,
          estimate = .pred_class)) %&gt;% 
  bind_rows(knn_results %&gt;% 
  mutate_if(is.character, as.factor) %&gt;% 
  mutate(model = &#39;knn_mod&#39;) %&gt;% 
  metrics(truth = species,
          estimate = .pred_class)) %&gt;% 
  bind_rows(xg_results %&gt;%
  mutate_if(is.character, as.factor) %&gt;%
  mutate(model = &#39;xg_mod&#39;) %&gt;%
  metrics(truth = species,
          estimate = .pred_class)) %&gt;%
  bind_cols(model_type = c(&#39;multinomial regression&#39;, &#39;multinomial regression&#39;, &#39;multinomial regression&#39;, &#39;random forest&#39;, &#39;random forest&#39;, &#39;random forest&#39;, &#39;knn&#39;, &#39;knn&#39;, &#39;knn&#39;, &#39;xgboost&#39;, &#39;xgboost&#39;, &#39;xgboost&#39;)) 

metric_results %&gt;% 
  select(model = model_type, measure = `.metric`, value = `.estimate`) %&gt;% 
  filter(measure == &#39;accuracy&#39;) %&gt;% 
  arrange(-value) %&gt;% 
  gt() %&gt;%
  tab_header(
    title = md(&quot;Summary of all four models&quot;),
    subtitle = &quot;Compaing model accuracies&quot;
  ) %&gt;%
  tab_style(
    style = list(
      cell_fill(color = &quot;#2D6A65&quot;),
      cell_text(weight = &quot;bold&quot;)
      ),
    locations = cells_body(
    )    
  )</code></pre>
<div id="yciuokgcvi" style="overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>html {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;
}

#yciuokgcvi .gt_table {
  display: table;
  border-collapse: collapse;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#yciuokgcvi .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#yciuokgcvi .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#yciuokgcvi .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 0;
  padding-bottom: 4px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#yciuokgcvi .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#yciuokgcvi .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#yciuokgcvi .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#yciuokgcvi .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#yciuokgcvi .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#yciuokgcvi .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#yciuokgcvi .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#yciuokgcvi .gt_group_heading {
  padding: 8px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
}

#yciuokgcvi .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#yciuokgcvi .gt_from_md > :first-child {
  margin-top: 0;
}

#yciuokgcvi .gt_from_md > :last-child {
  margin-bottom: 0;
}

#yciuokgcvi .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#yciuokgcvi .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 12px;
}

#yciuokgcvi .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#yciuokgcvi .gt_first_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
}

#yciuokgcvi .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#yciuokgcvi .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#yciuokgcvi .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#yciuokgcvi .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#yciuokgcvi .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#yciuokgcvi .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding: 4px;
}

#yciuokgcvi .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#yciuokgcvi .gt_sourcenote {
  font-size: 90%;
  padding: 4px;
}

#yciuokgcvi .gt_left {
  text-align: left;
}

#yciuokgcvi .gt_center {
  text-align: center;
}

#yciuokgcvi .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#yciuokgcvi .gt_font_normal {
  font-weight: normal;
}

#yciuokgcvi .gt_font_bold {
  font-weight: bold;
}

#yciuokgcvi .gt_font_italic {
  font-style: italic;
}

#yciuokgcvi .gt_super {
  font-size: 65%;
}

#yciuokgcvi .gt_footnote_marks {
  font-style: italic;
  font-weight: normal;
  font-size: 65%;
}
</style>
<table class="gt_table">
  <thead class="gt_header">
    <tr>
      <th colspan="3" class="gt_heading gt_title gt_font_normal" style>Summary of all four models</th>
    </tr>
    <tr>
      <th colspan="3" class="gt_heading gt_subtitle gt_font_normal gt_bottom_border" style>Compaing model accuracies</th>
    </tr>
  </thead>
  <thead class="gt_col_headings">
    <tr>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1">model</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1">measure</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1">value</th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr><td class="gt_row gt_left" style="background-color: #2D6A65; font-weight: bold;">random forest</td>
<td class="gt_row gt_left" style="background-color: #2D6A65; font-weight: bold;">accuracy</td>
<td class="gt_row gt_right" style="background-color: #2D6A65; font-weight: bold;">0.9714286</td></tr>
    <tr><td class="gt_row gt_left" style="background-color: #2D6A65; font-weight: bold;">knn</td>
<td class="gt_row gt_left" style="background-color: #2D6A65; font-weight: bold;">accuracy</td>
<td class="gt_row gt_right" style="background-color: #2D6A65; font-weight: bold;">0.9714286</td></tr>
    <tr><td class="gt_row gt_left" style="background-color: #2D6A65; font-weight: bold;">xgboost</td>
<td class="gt_row gt_left" style="background-color: #2D6A65; font-weight: bold;">accuracy</td>
<td class="gt_row gt_right" style="background-color: #2D6A65; font-weight: bold;">0.9714286</td></tr>
    <tr><td class="gt_row gt_left" style="background-color: #2D6A65; font-weight: bold;">multinomial regression</td>
<td class="gt_row gt_left" style="background-color: #2D6A65; font-weight: bold;">accuracy</td>
<td class="gt_row gt_right" style="background-color: #2D6A65; font-weight: bold;">0.9571429</td></tr>
  </tbody>
  
  
</table>
</div>
</div>
</div>
<div id="penguin-prediction-tool" class="section level1">
<h1>penguin-prediction-tool</h1>
<p>This <a href="https://github.com/gmednick/penguin-prediction-tool/blob/main/penguin_sh_tool.R">tool</a> uses classification algorithms to predict penguin species (Adelie, Chinstrap, Gentoo) based on bill length (mm) and bill depth (mm). Models include multinomial regression, k-nearest neighbors, random forest, xgboost (default hyperparameters settings were used).</p>
<p>The script utilizes the argparser package in R for parsing command-line arguments. The following examples show the incantation for running the Rscript in the command-line with the following arguments: model, bill length and bill depth.</p>
<p>Ex 1: Rscript penguin_sh_tool.R model=mn_mod_fit bill_length=39 bill_depth=18 <br>
Ex 2: Rscript penguin_sh_tool.R knn_mod_fit 50 18 <br>
Ex 3: Rscript penguin_sh_tool.R rf_mod_fit 50 18 <br>
Ex 4. Rscript penguin_sh_tool.R xg_mod_fit 50 14 <br></p>
<p>In the command line, the output of Ex 3 includes the following messages</p>
<p><img width="685" alt="image" src="https://user-images.githubusercontent.com/45637747/125180220-6deff900-e1ac-11eb-80b3-d2c67b82295e.png"></p>
<p>and returns the predicted species based on the user inputs.</p>
<p><img width="240" alt="image" src="https://user-images.githubusercontent.com/45637747/125153850-704e4680-e10b-11eb-9933-ea8a855c5365.png"></p>
<p>If you want to make your own penguin predictions, the penguin prediction tool (R script) is available on <a href="https://github.com/gmednick/penguin-prediction-tool/blob/main/penguin_sh_tool.R">GitHub</a> <br></p>
<p>:penguin: :penguin: :penguin: :penguin: :penguin: :penguin: :penguin: :penguin: :penguin: :penguin: :penguin: :penguin: :penguin: :penguin: :penguin: :penguin: :penguin: :penguin: :penguin: :penguin: :penguin: :penguin: :penguin: :penguin: :penguin: :penguin: :penguin:</p>
</div>
